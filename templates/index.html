{{define "index"}}

{{template "_head"}}
    <body>
    <div class="container">
        <section class="card">
            <div>
                <table class="table table-striped table-hover mb-0">
                    <thead>
                    <tr>
                        <th>Nome</th>
                        <th>Descrição</th>
                        <th>Preço</th>
                        <th>Quantidade</th>
                    </tr>
                    </thead>
                    <tbody>
                        {{range .}}
                            <tr>
                                <td>{{.Name}}</td>
                                <td>{{.Description}}</td>
                                <td>{{.Price}}</td>
                                <td>{{.Quantity}}</td>
                                <td><a href="/edit?id={{.Id}}"><button class="btn btn-success">Editar</button></a></td>
                                <td><button class="btn btn-danger" onclick="deletar({{.Id}})">Deletar</button></td>
                            </tr>
                                {{end}}
                    </tbody>
                </table>
            </div>
        </section>
        <div class="card-footer">
            <a href="/new-product"><button class="bnt btn-primary">Cadastrar produto</button></a>
        </div>

    </div>
    </body>

    <script>
        function deletar(id) {

            let response = confirm(`Deseja mesmo deletar o produto ${id}`)

            if (response) {
                window.location = `/delete?id=${id}`
            } else {
               window.location = "/"
            }

        }
    </script>

    </html>
{{end}}